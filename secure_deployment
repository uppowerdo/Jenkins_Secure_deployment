pipeline {
    agent any  
   
    stages {
        stage('Build') {        
            steps {
                echo 'Using Maven complie'
            }
        }
        stage('Unit and Integration Tests') {
           
            steps {
                echo 'running JUnit test'
                echo 'running Selenium Integration Tests'
                
            }
            post {
                 success {   
                         mail to: 'kimirise@gmail.com',
                         body: 'Unit and integration test was successfull', 
                         subject: 'Unit and integration test status Email'
                         }
                 failure {
                         emailext(attachLog: true, 
                         body: 'Unit and integration test failed', 
                         subject: 'Unit and integration test status Email', 
                         to: 'kimirise@gmail.com')
                         }
            }
        }      
        stage('Security Scan') {
            // 使用 SAST 工具扫描漏洞 (替换为适合您的安全扫描工具)
            steps {
                echo '准备进行安全扫描...'
                echo '配置安全扫描工具...'
                echo '设置安全扫描范围...'
                echo '开始模拟安全扫描...'
                echo '正在扫描文件1...'
                echo '正在扫描文件2...'
                echo '正在扫描文件3...'
                echo '安全扫描完成！'
            }
            post {
                 success {
                    emailext(attachLog: true, 
                    body: 'Security Scan was successfull', 
                    subject: 'Security Scan status Email', 
                    to: 'kimirise@gmail.com')
                         }
                 failure {
                    emailext(attachLog: true, 
                    body: 'Security Scan failed', 
                    subject: 'Security Scan status Email', 
                    to: 'kimirise@gmail.com')
                         }
            }
        }
    }
}
